1) Файл /etc/passwd представляет собой набор данных о пользователях системы. В файле содержатся следующие поля: имя пользователя, пароль (скрыт), uid пользователя, gid группы, описание его функций и рабочий каталог. Пользователи с id до 999 являются системными. Таковыми являются пользователи: tcpdump, tss, rtkit и другие.

В файле /etc/group содержится информация об имени пользователя, пароле (скрыт) и gid группы, в которой он состоит.

2) UID - это идентификатор пользователя. Это номер, назначенный каждому пользователю Linux. Найти UID можно в файле /etc/passwd.

UID допускает использование значений от 0 до 65535. Но номер 0 всегда имеет суперпользователь root. UID с 1 по 100 по соглашению резервируются под системные нужды, а в некоторых дистрибутивах Linux резервируются UID с 1 по 999.

3) GID - это идентификатор группы. Для организации доступа нескольких пользователей к некоторым ресурсам применяются группы пользователей. Каждая группа умеет свой уникальный GID.

4) Посмотреть GID группы пользователя и его принадлежность к группе или группам можно в файле /etc/group.

5) Чтобы добавить пользователя в систему используется команда useradd username. Использовать данную команду может только root или пользователи с привилегиями sudo.

После этого пользователю можно задать пароль с помощью команды passwd username.

Если использовать команду useradd -m username, то в каталоге /home появится домашний каталог пользователя. 

6) Изменить имя существующего пользователя можно командой usermod -l new_username old_username

7) Skel_dir – каталог пользователя. Содержит файлы, которые определяют среду пользователя в системе.

8) Чтобы удалить пользователя вместе с его файлами, нужно произвести следующие действия.

Сначала командой find / -user username ищем все файлы пользователя, затем командой pgrep -u username находим все процессы пользователя. Удаляем все процессы пользователя командой killall -9 -u username. Удаляем пользователя командой userdel username. Проверяем, нет ли пользователя в файле /etc/sudoers.

9) Чтобы заблокировать пользователя в Linux можно использовать команду passwd -l user_name

Чтобы разблокировать пользователя с помощью команды passwd нужно прописать

passwd -u user_name


10) Удалить пароль пользователя можно командой passwd username. После этого пользователь может сменить пароль.

11) extended format of information about the directory. Команда ls -l.

Дает возможность посмотреть набор прав, установленных для пользователя в конкретном каталоге.

12) Каждый файл имеет три параметра доступа: чтение, запись, выполнение. При этом каждый файл имеет три категории пользователей, для которых можно устанавливать различные сочетания прав доступа: владелец, группа, остальные (ugo).

Каждый пользователь может получить полный доступ только к файлам, владельцем которых он является или к тем, доступ к которым ему разрешен. Только Root может работать со всеми файлами.

Есть также специальные права доступа к файлам, что позволяет обычным пользователя выполнять действия с файлами без знания пароля суперпользователя:

- SUID - позволяет обычным пользователям запускать программы от имени суперпользователя.

- SGID - используется для организации общих папок.

- Sticky-bit - пользователи могут только создавать, читать и выполнять файлы, но не могут удалять файлы, принадлежащие другим пользователям. 


14) Чтобы сменить владельца папки следует использовать утилиту chown.

Пользователь test создал папку training.
Поменял владельца папки на stas командой - sudo chown stas /home/test/training

Также я изменил группу владельца папки
sudo chown stas:stas /home/test/training

15) Octal representation of access rights необходимо для более удобного администрирования представления прав доступа. 

4 - Чтение
2 - Запись
1 - исполнение

chmod -R 755 filename/folder name - установит полные права для файла для владельца, чтение и исполнение для группы, в которую входит владелец, исполнение для остальных

chmod 700 filename/folder name - даст полные права только владельцу 

umask - это пользовательская маска (user mask), которая используется для определения конечных прав доступа.

По умолчанию Umask равна 0022 для суперпользователя и 0002 для обычного. Значение umask по умолчанию устанавливается в файлах /etc/.bashrc или /etc/.profile. 

Значение umask для stas (суперпользователь)

Значение umask для test (обычный пользователь)

Режим полного доступа для доступа к папке равен 0777, для файла - 0666. Соответственно, для определения права на папку нужно из 0777 или 0666 вычесть маску определенного пользователя. 0777 - 0022 = 0755, и т.д.

Можно отобразить значение маски в символической записи, используя опцию -S:
umask -S

Чтобы установить новое значение нужно изменить или добавить строку в начале файла /etc/profile. Например, umask 027.

16) sticky bit - это специальное разрешение для доступа к папкам.

Используется с помощью добавления четвертой цифры к обычным разрешениям. Первая цифра всегда равна 1.

Пример - chmod 1700 /home/stas/rel

Установлены права полного доступа к папке rel для пользователя stas. Для всех остальных пользователей доступа нет.

Пользователь test войти в папку rel не смог из-за отсутствия прав доступа.


17) Чтобы выполнить скрипт в указанной оболочке, нужно установить для него флаг исполняемости.

например, командой
chmod ugo+x script-name